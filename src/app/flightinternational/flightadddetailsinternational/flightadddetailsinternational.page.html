<ion-header class="flightpage-header">
    <ion-row>
      <ion-col class="col-header">
        <div class="d-flex">
          <div class="div-goback" (click)="goback()">
              <img class="header-img-back" src="./assets/imgs/ios-arrow-round-back.svg" >
          </div>
          <div class="div-header-title">
            <div class="div-title" *ngIf="activeStep == 1 else step2title">Thông tin liên lạc</div>
            <ng-template #step2title>
                <div class="div-title">Thông tin hành khách</div>
            </ng-template>
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-header>
  <ion-content >
    <div class="content-flightadddetails">
        <div *ngIf="activeStep == 1 else stepUserInfo">
            <div class="div-img-step">
                <img class="img-step" src="./assets/ic_flight/step_2.svg">
            </div>
    
            <div class="div-login m-bottom-16" *ngIf="!loginuser" (click)="goToLogin()">
                Đã có tài khoản? <span class="text-login">Đăng nhập ngay</span>
            </div>

            <div class="div-user-info">
                    <div  [ngClass]=" ( (hasinput && !hoten) || hoteninvalid || subnameinvalid)? 'm-bottom-12 cls-error': 'm-bottom-12' ">
                        <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Họ tên</ion-label>
                            <ion-input [(ngModel)]="hoten" type="text"  (ionBlur)="inputLostFocus(null)" (ionInput)="inputFocus(null, $event)" (ionFocus)="inputOnFocus(null, 9)"></ion-input>
                        </ion-item>
                    </div>
                    
                    <div [ngClass]="((hasinput && !sodienthoai) || sodienthoaiinvalid) ? 'm-bottom-12 cls-error': 'm-bottom-12' ">
                        <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Số điện thoại</ion-label>
                            <ion-input [(ngModel)]="sodienthoai" maxlength=11 required  (ionBlur)="checkInputUserInfo(2)" (ionFocus)="inputOnFocus(null, 10)"></ion-input>
                        </ion-item>
                    </div>
    
                    <div [ngClass]="((hasinput && !email) || emailinvalid) ? 'm-bottom-12 cls-error': 'm-bottom-12' ">
                        <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Email</ion-label>
                            <ion-input [(ngModel)]="email" type="email" (ionBlur)="checkInputUserInfo(3)" (ionFocus)="inputOnFocus(null, 11)"></ion-input>
                        </ion-item>
                    </div>
                    
                    <div class="div-showerror m-bottom-12">
                        <div class="d-flex cls-error" *ngIf="hasinput && !hoten">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Vui lòng nhập họ tên.
                            </div>
                        </div>
                        <div class="d-flex cls-error m-top-8" *ngIf="hoten && hoteninvalid">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Họ tên không hợp lệ. Vui lòng kiểm tra lại!
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="hoten && subnameinvalid">
                            <div class="div-icon-error width-40">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                              Không nằm trong danh sách họ phổ biến. Vui lòng kiểm tra lại!
                            </div>
                          </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="hasinput && !sodienthoai">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Vui lòng nhập số điện thoại.
                            </div>
                        </div>
                        <div class="d-flex cls-error m-top-8" *ngIf="sodienthoai && sodienthoaiinvalid">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Số điện thoại không hợp lệ. Vui lòng kiểm tra lại!
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="hasinput && !email">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Vui lòng nhập email.
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="email && emailinvalid">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                Định dạng địa chỉ email không hợp lệ. Vui lòng kiểm tra lại!
                            </div>
                        </div>
                    </div>
            </div>

             <div class="div-split-panel"></div>

            <div class="div-voucher-apply" *ngIf="promocode" (click)="showdiscount()">
                <div class="width-200">
                <span class="text-normal">Ưu đãi (</span>
                <span class="text-code" *ngIf="promocode">{{promocode}}</span>
                <span class="text-normal">)</span> 
                </div>
            <div class="width-100 text-normal text-right p-r-5" *ngIf="promocode">{{gf.convertNumberToString(discountpromo)}}</div>
            </div>
            <div class="m-top-4" *ngIf="msg"> 
                <div *ngIf="ischeckerror==1&& msg" class="text-red">{{msg}}</div>
                <div *ngIf="ischeckerror==0&& msg" class="text-grey">{{msg}}</div>
            </div> 

            <div class="div-flex align-center" (click)="showdiscount()" *ngIf="!promocode">
              <div class="div-icon"><img class="icon-point" src="./assets/ic_voucher/ticket_tealish.svg"/></div>
              <div class="div-text-center">
                <div class="width-100">Nhập mã giảm giá <span class="text-sub">(iVIVU Voucher, MGift..)</span></div>
              </div>
              <div class="div-button width-10"><img src="./assets/ic_ordersupport/next.svg"></div>
            </div>
          
            <app-voucherslide></app-voucherslide>

            <div class="div-split-panel"></div> 
           

            <div class="div-vat">
                <div class="d-flex">
                    <div class="div-text-invoice div-width-100"><ion-label class="label-input">Xuất hóa đơn</ion-label></div>
                    <div class="text-right div-width-100"><ion-toggle (ionChange)="(0)" [(ngModel)]="ischeck" color="secondary"></ion-toggle></div>
                    
                    
                </div>

                <div *ngIf="ischeck">
                    <div *ngIf="ischeck">
                        <div class="m-bottom-12">
                          <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Tên công ty</ion-label>
                            <ion-input class="cls-input-custom" [(ngModel)]="companyname" type="text" required></ion-input>
                          </ion-item>
                        </div>
                        <div class="m-bottom-12">
                          <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Địa chỉ</ion-label>
                            <ion-input class="cls-input-custom" [(ngModel)]="address" type="text" required></ion-input>
                          </ion-item>
                        </div>
                        <div class="m-bottom-12">
                          <ion-item style="padding-inline-start: 0;padding-inline-end: 0;--padding-start: 0">
                            <ion-label class="sub-label m-bottom-6" position="stacked">Mã số thuế</ion-label>
                            <ion-input class="cls-input-custom" [(ngModel)]="tax" type="text" required></ion-input>
                          </ion-item>
                        </div>
                        <div style="margin-left: 5px">
                            <ion-checkbox (ionChange)="showNameMail($event)" style="width: 20px; height: 20px" [checked]="ishideNameMail"  color="secondary"></ion-checkbox>
                            <ion-label class="label-input" style="margin: 0px 10px;">Dùng họ tên & email của người đặt dịch vụ để xuất hoá đơn</ion-label>
                          </div>
                          <div *ngIf="!ishideNameMail">
                            <ion-col size="12">
                              <ion-item style="--padding-start: 0px">
                                <ion-label class="sub-label m-bottom-6" position="stacked">Họ tên</ion-label>
                                <ion-input class="cls-input-custom" [(ngModel)]="hotenhddt" type="text" required></ion-input>
                              </ion-item>
                            </ion-col>
                            <ion-col size="12">
                              <ion-item style="--padding-start: 0px">
                                <ion-label class="sub-label m-bottom-6" position="stacked">Email nhận HĐ</ion-label>
                                <ion-input class="cls-input-custom"  [(ngModel)]="emailhddt" type="text" required></ion-input>
                              </ion-item>
                            </ion-col>
                          </div>
                    </div>
                  </div>
            </div>


            

        </div>
        <ng-template #stepUserInfo>
            
            <div class="div-title m-bottom-12">Thông tin hành khách</div>
    
            <div *ngIf="adults && adults.length >0">
                <div *ngFor="let itemAdult of adults; let idxa = index">
                    <div  class="div-sub-title d-flex">
                            <div class="div-width-300">Người lớn {{itemAdult.id}}</div>
                            <div class="div-width-100 text-right" *ngIf="itemAdult.genderdisplay && itemAdult.name" (click)= "editPaxInfo(itemAdult, 1)">Xóa</div>
                            
                    </div>
                    <div class="d-flex">
                        <div [ngClass]="(itemAdult.errorGender || itemAdult.errorInfo) ? 'div-left cls-error div-width-100' : 'div-left div-width-100'" (click)="selectAdultGender(itemAdult)" (blur)="checkInput(itemAdult, 1, true)">
                            <div [ngClass]="!itemAdult.genderdisplay ?  'sub-label m-top-17 label-absolute cls-gender-transition' : 'sub-label m-top-19 label-absolute cls-gender-transition'">
                                Danh xưng
                            </div>
                            <div class= 'text-gender' *ngIf="itemAdult.genderdisplay">{{itemAdult.genderdisplay}}</div>
                            <div [ngClass]="(itemAdult.errorGender || itemAdult.errorInfo)? 'div-icon-down cls-error' : 'div-icon-down'">
                                <img *ngIf="!(itemAdult.errorGender || itemAdult.errorInfo)" src="./assets/imgs/ic_down_b.svg">
                                <img *ngIf="(itemAdult.errorGender || itemAdult.errorInfo)" src="./assets/imgs/ic_down_red.svg">
                            </div>
                        </div>

                        <div class="p-relative m-top-16 h-45 div-width-100">
                        </div>
                    </div>

                    <div class="p-relative m-top-36 div-width-100">
                        <div [ngClass]="(itemAdult.errorName || itemAdult.errorSubName || itemAdult.errorInfo) ? 'div-right cls-error' : 'div-right'">
                            <ion-label [ngClass]="!itemAdult.name ? 'sub-label m-top--16 label-absolute' : 'sub-label m-top--16 label-absolute cls-gender-transition'" >Họ và tên đầy đủ</ion-label>
                            <ion-input class="cls-input-custom" type="text" (ionChange)=textchangehoten(itemAdult) [(ngModel)]="itemAdult.name" (ionInput)="inputFocus(itemAdult, $event, 2)" (ionBlur)="inputLostFocus(itemAdult, true)"  (ionFocus)="inputOnFocus(itemAdult, 2)" required></ion-input>
                        </div>
                    </div>
                    <div class="p-top-6">
                        <ion-label class="text-sub">Điền đầy đủ Họ tên như trên giấy tờ tùy thân dùng để thực hiện chuyến bay</ion-label>
                    </div>

                    <div *ngIf="isExtenal ">
                       
                        <div class="m-top-24 d-flex">
                            <div [ngClass]="(itemAdult.errorDateofbirth || (!itemAdult.dateofbirth && itemAdult.errorInfo)) ? 'p-relative div-width-100 m-r-8 cls-error' : 'p-relative div-width-100 m-r-8' ">
                                <ion-label [ngClass]="!itemAdult.dateofbirth ? 'sub-label label-dob m-bottom-6' : 'sub-label label-dob m-bottom-6 top-dob-24'" position="floating">Sinh ngày</ion-label>
                                <ion-datetime cancelText="Thoát" doneText="Hoàn thành" [min]="itemAdult.mindob" [max]="itemAdult.maxbod" displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [ngClass]="!itemAdult.dateofbirth ? 'cls-datetofbirth p-top-27' : 'cls-datetofbirth m-top-16'"
                                    [(ngModel)]="itemAdult.dateofbirth" (ionBlur)="checkInput(itemAdult, 3, true)" required></ion-datetime>
                            </div>

                            <div [ngClass]="(itemAdult.errorCountry || (!itemAdult.errorCountry && itemAdult.errorInfo)) ? 'div-width-100 p-relative border-bottom cls-error' : 'div-width-100 p-relative border-bottom'" >
                                <div class="sub-label label-country">
                                    <div [ngClass]=" !itemAdult.countryName ? 'p-absolute cls-country' :'p-absolute cls-country-transition'">
                                        Quốc tịch
                                    </div>
                                    <ion-searchbar class="cls-input-country-custom cls-passportcountry" [(ngModel)]="itemAdult.countryName" searchIcon="false" cancelIcon="false" #input id="input" style="padding: 0;" autocomplete="on"  debounce="10" placeholder="" (ionInput)="getCountry($event, itemAdult)" (ionBlur)="checkInput(itemAdult, 4, true)" (ionFocus)="inputOnFocus(itemAdult, 4)"></ion-searchbar>
                                </div>
                              
                                <div [ngClass]="(itemAdult.errorCountry || itemAdult.errorInfo)? 'div-icon-down bottom-6 cls-error' : 'div-icon-down bottom-6' " (click)="getCountry('dropdownicon', itemAdult)">
                                    <img *ngIf="!itemAdult.errorCountry" src="./assets/imgs/ic_down_b.svg">
                                    <img *ngIf="itemAdult.errorCountry" src="./assets/imgs/ic_down_red.svg">
                                </div>
    
                                <div *ngIf="itemAdult.showSelectCountry" class="cls-selection-country">
                                    <ion-item class="item-country" *ngFor="let itemcountry of listcountry" (click)="selectCountry(itemAdult, itemcountry)">{{ itemcountry.name }}</ion-item>
                                </div>
                            </div>
                        </div>
                        <div [ngClass]="(itemAdult.errorPassport || (!itemAdult.passport && itemAdult.errorInfo)) ? 'div-width-100 p-relative m-top-36 cls-error' : 'div-width-100 p-relative m-top-36' ">
                            <ion-label [ngClass]="!itemAdult.passport ? 'sub-label label-passport' : 'sub-label label-passport cls-passport-transition'" >Số hộ chiếu</ion-label>
                            <ion-input class="cls-input-custom" type="text" [(ngModel)]="itemAdult.passport" (ionBlur)="checkInput(itemAdult, 5, true)" (ionFocus)="inputOnFocus(itemAdult, 5)" required></ion-input>
                            
                        </div>
                        

                        <div class='d-flex p-relative m-top-24 h-45'>
                            <div [ngClass]="(itemAdult.errorPassportCountry || (!itemAdult.passportCountry && itemAdult.errorInfo)) ? 'div-width-100 p-relative border-bottom  w-100 cls-error' : 'div-width-100 p-relative border-bottom w-100'">
                                <div class="sub-label label-country">
                                    <div [ngClass]=" !itemAdult.passportCountryName ? 'p-absolute cls-country' :'p-absolute cls-country-transition'">
                                        Quốc gia cấp
                                    </div>
                                    <ion-searchbar class="cls-input-country-custom cls-passportcountry" [(ngModel)]="itemAdult.passportCountryName" searchIcon="false" cancelIcon="false" #input id="input" style="padding: 0;" autocomplete="on"  debounce="10" placeholder="" (ionInput)="getPassportCountry($event, itemAdult)" (ionBlur)="checkInput(itemAdult, 6, true)"  (ionFocus)="inputOnFocus(itemAdult, 6)"></ion-searchbar>
                                </div>

                                <div [ngClass]="(itemAdult.errorPassportCountry || itemAdult.errorInfo)? 'div-icon-down bottom-6 cls-error' : 'div-icon-down bottom-6' "   (click)="getPassportCountry('dropdownicon', itemAdult)">
                                    <img *ngIf="!itemAdult.errorPassportCountry" src="./assets/imgs/ic_down_b.svg">
                                    <img *ngIf="itemAdult.errorPassportCountry" src="./assets/imgs/ic_down_red.svg">
                                </div>

                                <div *ngIf="itemAdult.showSelectPassportCountry" class="cls-selection-country">
                                    <ion-item class="item-country" *ngFor="let itempassportcountry of listpassportcountry" (click)="selectPassportCountry(itemAdult, itempassportcountry)" >{{ itempassportcountry.name }}</ion-item>
                                </div>
                            </div>

                            <div [ngClass]="(itemAdult.errorPassportExpireDate || (!itemAdult.passportExpireDate && itemAdult.errorInfo))? 'div-width-100 m-left-8 cls-error' : 'div-width-100 m-left-8'">
                                <ion-label [ngClass]="!itemAdult.passportExpireDate ? 'sub-label label-dob m-bottom-6' : 'sub-label label-dob m-bottom-6 top-dob-24'" position="floating">Ngày hết hạn</ion-label>
                                <ion-datetime cancelText="Thoát" doneText="Hoàn thành" [min]="itemAdult.mindob" [max]="itemAdult.maxepdate" displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [ngClass]="!itemAdult.passportExpireDate ? 'cls-datetofbirth p-top-27 w-200' : 'cls-datetofbirth m-top-16 w-200'"
                                    [(ngModel)]="itemAdult.passportExpireDate" (ionBlur)="checkInput(itemAdult, 7, true)" required></ion-datetime>
                            </div>
                        </div>
                    </div>

                  
                    <div *ngIf="showLotusPoint && !itemAdult.airlineMemberCode" class="text-lotus-point" (click)="openLotusPointSave(itemAdult)">Nhập thẻ bông sen vàng <img class="img-vector" src="./assets/imgs/vector.svg" /></div>
                    <div *ngIf="showLotusPoint && itemAdult.airlineMemberCode" class="text-lotus-code" (click)="openLotusPointSave(itemAdult)">Thẻ bông sen vàng: {{ itemAdult.airlineMemberCode }}</div>

                    <!-- show error -->
                    <div class="div-showerror m-top-16" *ngIf="!inputtext">
                        <div class="d-flex cls-error" *ngIf="itemAdult.textErrorInfo">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorInfo }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorGender">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorGender }}
                            </div>
                        </div>
                        
                        <div class="d-flex cls-error m-top-8" *ngIf="!itemAdult.textErrorInfo && itemAdult.textErrorName">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorName }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.name && !itemAdult.textErrorName && itemAdult.textErrorSubName">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorSubName }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorDateofbirth">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorDateofbirth }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorCountry">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorCountry }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorPassport">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorPassport }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorPassportCountry">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorPassportCountry }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemAdult.textErrorPassportExpireDate">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemAdult.textErrorPassportExpireDate }}
                            </div>
                        </div>
                    </div>
                    <div class="div-split" *ngIf="idxa != adults.length-1"></div>
                </div>
            </div>
           
            <div *ngIf="childs && childs.length >0" class="div-split"></div>
            <div *ngIf="childs && childs.length >0">
                <div *ngFor="let itemChild of childs; let idxc = index">
                    <div class="d-flex">
                        <div class="div-width-300">
                                <div class="div-sub-title " *ngIf="!itemChild.isInfant else divinfant">Trẻ em {{itemChild.id}} <span class="sub-label f-12">(Từ 2 - Dưới 12 tuổi)</span></div>
                                <ng-template #divinfant>
                                    <div class="div-sub-title m-bottom-6">Em bé {{itemChild.iddisplay}} <span class="sub-label f-12">(Dưới 2 tuổi)</span></div>
                                </ng-template>
                        </div>
                        <div class="div-width-100 text-right" *ngIf="itemChild.genderdisplay && itemChild.name && itemChild.dateofbirth" (click)= "editPaxInfo(itemChild, 2)">Xóa</div>
                    </div>
                  
                    <div class=" d-flex ">
                        <div [ngClass]="(itemChild.errorGender || itemChild.errorInfo)? 'div-left div-width-100 cls-error ' : 'div-left div-width-100'" (click)="selectGender(itemChild)" (blur)="checkInput(itemChild, 1, false)">
                            <div [ngClass]="!itemChild.genderdisplay ? 'sub-label m-top-17 label-absolute' : 'sub-label m-top-19 label-absolute cls-gender-transition'">
                                <ion-label class="sub-label">Danh xưng</ion-label>
                            </div>
                            <div class="text-gender" *ngIf="itemChild.genderdisplay" >{{itemChild.genderdisplay}}</div>
                            <div [ngClass]="(itemChild.errorGender || itemChild.errorInfo)? 'div-icon-down cls-error' : 'div-icon-down'">
                                <img *ngIf="!(itemChild.errorGender || itemChild.errorInfo)" src="./assets/imgs/ic_down_b.svg">
                                <img *ngIf="(itemChild.errorGender || itemChild.errorInfo)" src="./assets/imgs/ic_down_red.svg">
                            </div>
                        </div>

                        <div class="p-relative m-top-16 h-45 div-width-100">
                        </div>
                       
                    </div>

                    <div class="p-relative m-top-36 div-width-100">
                        <div [ngClass]="(itemChild.errorName || itemChild.errorSubName || itemChild.errorInfo) ? 'div-right cls-error' : 'div-right'">
                            <ion-label [ngClass]="!itemChild.name ? 'sub-label label-absolute m-top--16'  : 'sub-label m-top--16 label-absolute cls-gender-transition'" >Họ và tên đầy đủ</ion-label>
                            <ion-input class="cls-input-custom" type="text" (ionChange)=textchangehoten(itemChild) [(ngModel)]="itemChild.name" (ionInput)="inputFocus(itemChild, $event)" (ionBlur)="inputLostFocus(itemChild, false)" (ionFocus)="inputOnFocus(itemChild, 2)" required></ion-input>
                        
                        </div>
                    </div>
                    
                    <div class="p-top-6">
                        <ion-label class="text-sub">Điền đầy đủ Họ tên như trên giấy tờ tùy thân dùng để thực hiện chuyến bay</ion-label>
                    </div>
                

                    <div *ngIf="isExtenal ">

                        <div class="d-flex m-top-24">
                            <div [ngClass]="(itemChild.errorDateofbirth || (itemChild.errorInfo && !itemChild.dateofbirth) )? 'p-relative div-width-100 m-r-8 cls-error' : 'p-relative div-width-100 m-r-8' ">
                                <ion-label [ngClass]="!itemChild.dateofbirth ? 'sub-label label-dob m-bottom-6' : 'sub-label label-dob m-bottom-6 top-dob-24'" position="floating">Sinh ngày</ion-label>
                                <ion-datetime cancelText="Thoát" doneText="Hoàn thành" [min]="itemChild.mindob" [max]="itemChild.maxbod" displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [ngClass]="!itemChild.dateofbirth ? 'cls-datetofbirth p-top-27' : 'cls-datetofbirth m-top-16'"
                                    [(ngModel)]="itemChild.dateofbirth" (ionChange)="checkInput(itemChild, 3, false)" required></ion-datetime>
                            </div>

                            <div [ngClass]="(itemChild.errorCountry || (itemChild.errorInfo && !itemChild.countryName)) ? 'div-width-100  p-relative border-bottom cls-error' : 'div-width-100  p-relative border-bottom'" >
                                <div class="sub-label label-country">
                                    <div [ngClass]=" !itemChild.countryName ? 'p-absolute cls-country' :'p-absolute cls-country-transition'">
                                        Quốc tịch
                                    </div>
                                    <ion-searchbar class="cls-input-country-custom cls-passportcountry" [(ngModel)]="itemChild.countryName" searchIcon="false" cancelIcon="false" #input id="input" style="padding: 0;" autocomplete="on"  debounce="10" placeholder="" (ionInput)="getCountry($event, itemChild)" (ionBlur)="checkInput(itemChild, 4, false)"  (ionFocus)="inputOnFocus(itemChild, 4)"></ion-searchbar>
                                </div>
                              
                                <div [ngClass]="(itemChild.errorCountry || itemChild.errorInfo)? 'div-icon-down bottom-6 cls-error' : 'div-icon-down bottom-6'" (click)="getCountry('dropdownicon', itemChild)">
                                    <img *ngIf="!itemChild.errorCountry" src="./assets/imgs/ic_down_b.svg">
                                    <img *ngIf="itemChild.errorCountry" src="./assets/imgs/ic_down_red.svg">
                                </div>

                                <div *ngIf="itemChild.showSelectCountry" class="cls-selection-country">
                                    <ion-item class="item-country" *ngFor="let itemcountry of listcountry" (click)="selectCountry(itemChild, itemcountry)">{{ itemcountry.name }}</ion-item>
                                </div>
                            </div>

                           
                        </div>

                        <div [ngClass]="(itemChild.errorPassport || (itemChild.errorInfo && !itemChild.passport)) ? 'div-width-100 p-relative m-top-36 cls-error' : 'div-width-100 p-relative m-top-36'">
                            <ion-label [ngClass]="!itemChild.passport ? 'sub-label label-passport' : 'sub-label label-passport cls-passport-transition'" >Số hộ chiếu</ion-label>
                            <ion-input class="cls-input-custom" type="text" [(ngModel)]="itemChild.passport" (ionBlur)="checkInput(itemChild, 5, false)"  (ionFocus)="inputOnFocus(itemChild, 5)" required></ion-input>
                            
                        </div>

                        <div class="d-flex p-relative m-top-24 h-45">
                            <div [ngClass]="(itemChild.errorPassportCountry || (itemChild.errorInfo && !itemChild.passportCountryName)) ? 'div-width-100 p-relative border-bottom  w-100 cls-error' : 'div-width-100 p-relative border-bottom  w-100'">
                                <div class="sub-label label-country">
                                    <div [ngClass]=" !itemChild.passportCountryName ? 'p-absolute cls-country' :'p-absolute cls-country-transition'">
                                        Quốc gia cấp
                                    </div>
                                    <ion-searchbar class="cls-input-country-custom cls-passportcountry" [(ngModel)]="itemChild.passportCountryName" searchIcon="false" cancelIcon="false" #input id="input" style="padding: 0;" autocomplete="on"  debounce="10" placeholder="" (ionInput)="getPassportCountry($event, itemChild)" (ionBlur)="checkInput(itemChild, 6, false)"  (ionFocus)="inputOnFocus(itemChild, 6)"></ion-searchbar>
                                </div>

                                <div [ngClass]="(itemChild.errorPassportCountry || itemChild.errorInfo)? 'div-icon-down bottom-6 cls-error' : 'div-icon-down bottom-6'"  (click)="getPassportCountry('dropdownicon', itemChild)">
                                    <img *ngIf="!itemChild.errorPassportCountry" src="./assets/imgs/ic_down_b.svg">
                                    <img *ngIf="itemChild.errorPassportCountry" src="./assets/imgs/ic_down_red.svg">
                                </div>

                                <div *ngIf="itemChild.showSelectPassportCountry" class="cls-selection-country">
                                    <ion-item class="item-country" *ngFor="let itempassportcountry of listpassportcountry" (click)="selectPassportCountry(itemChild, itempassportcountry)">{{ itempassportcountry.name }}</ion-item>
                                </div>
                            </div>

                            <div [ngClass]="(itemChild.errorPassportExpireDate || (itemChild.errorInfo && !itemChild.passportExpireDate))? 'div-width-100 m-left-8 cls-error' : 'div-width-100 m-left-8'">
                                <ion-label [ngClass]="!itemChild.passportExpireDate ? 'sub-label label-dob m-bottom-6' : 'sub-label label-dob m-bottom-6 top-dob-24'" position="floating">Ngày hết hạn</ion-label>
                                <ion-datetime cancelText="Thoát" doneText="Hoàn thành" [min]="itemChild.mindob" [max]="itemChild.maxepdate" displayFormat="DD-MM-YYYY" pickerFormat="DD MM YYYY" [ngClass]="!itemChild.passportExpireDate ? 'cls-datetofbirth p-top-27 w-200' : 'cls-datetofbirth m-top-16 w-200'"
                                    [(ngModel)]="itemChild.passportExpireDate" (ionBlur)="checkInput(itemChild, 7, false)" required></ion-datetime>
                            </div>
                        </div>
                    </div>

                    <!-- show error -->
                    <div class="div-showerror m-top-16"  *ngIf="!inputtext">
                        <div class="d-flex cls-error" *ngIf="itemChild.textErrorInfo">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorInfo }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.textErrorGender">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorGender }}
                            </div>
                        </div>
                        
                        <div class="d-flex cls-error m-top-8" *ngIf="!itemChild.textErrorInfo && itemChild.textErrorName">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorName }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.name && !itemChild.textErrorName && itemChild.textErrorSubName">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorSubName }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="!itemChild.textErrorInfo && itemChild.textErrorDateofbirth">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorDateofbirth }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.textErrorCountry">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorCountry }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.textErrorPassport">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorPassport }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.textErrorPassportCountry">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorPassportCountry }}
                            </div>
                        </div>

                        <div class="d-flex cls-error m-top-8" *ngIf="itemChild.textErrorPassportExpireDate">
                            <div class="div-icon-error">
                                <img class="img-error" src="./assets/ic_flight/icon_warning.svg" >
                            </div>
                            <div class="div-text-error m-left-28">
                                {{ itemChild.textErrorPassportExpireDate }}
                            </div>
                        </div>
                    </div>
                    <div class="div-split" *ngIf="idxc != childs.length-1"></div>
                </div>
            </div>
        </ng-template>
        
        <!-- <div class="div-notice">
            <div class="div-sub-title m-bottom-8">Lưu ý:</div>
            <div class="text-normal m-bottom-8">
                - Toàn bộ hành trình và điều kiện vé sẽ không còn hiệu lực trong trường hợp quý khách không thanh toán đúng thời gian và quy định của chúng tôi.
            </div>
            <div class="text-normal m-bottom-8">
                - Quý khách vui lòng kiểm tra tất cả hành trình và thông tin cần thiết được gửi trong email để đảm bảo chuyến đi được như ý.
            </div>
            <div class="text-normal m-bottom-8">
                - Mọi chi phí thay đổi theo quy định của Hãng Hàng Không và phí dịch vụ sẽ không được hoàn trả trong mọi trường hợp.
            </div>
        </div> -->
    </div>
</ion-content>

<ion-footer>
    <div class='div-close-paxhint' *ngIf="inputtext && listpaxhint && listpaxhint.length >0" (click)="hidePaxHint()"><img src='./assets/ic_close_b.svg'></div>
    <div class="div-footer d-flex-footer">
        
        <!-- <ng-template #showpaxhint> -->
            <div class="div-pax-hint" *ngIf="inputtext && listpaxhint && listpaxhint.length >0">
                    <div *ngFor="let itempax of listpaxhint" class="d-flex m-bottom-16" (click)="selectPaxHint(itempax)">
                        <div class="icon-pax">
                                <img src="./assets/ic_flight/icon-pax.svg">
                        </div>
                        <div class="text-pax-hint">
                            {{itempax.name}}
                        </div>
                    </div>
                    
            </div>
        <!-- </ng-template> -->

        <div class="d-flex div-width-100">
            <div class="div-total" (click)="showPriceDetail()">
                <div class="d-flex-footer text-sub-total">
                  {{ adult }} người lớn, {{ child }} trẻ em
                </div>
                <div class="text-grey text-strike" *ngIf="promocode && discountpromo">{{ gf.convertNumberToString(totalPriceBeforeDiscount)}}</div>
                <div class="text-total" >{{totalPriceDisplay}}đ
                  <sup>
                    <img src="./assets/ic_green/ic_info.svg">
                  </sup>
                 </div>

                 
              </div>
              <div class="div-button">
                <button (click)="confirm()" ion-button round outline class="button button-done" *ngIf="activeStep == 1">Thông tin khách</button>
                <button (click)="confirm()" ion-button round outline class="button button-done" *ngIf="activeStep == 2">Thanh toán</button>
              </div>
        </div>
    </div>
  </ion-footer>