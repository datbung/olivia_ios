{"version":3,"sources":["webpack:///./src/app/roompaymentpayoo/roompaymentpayoo.module.ts","webpack:///./src/app/roompaymentpayoo/roompaymentpayoo.page.html","webpack:///./src/app/roompaymentpayoo/roompaymentpayoo.page.scss","webpack:///./src/app/roompaymentpayoo/roompaymentpayoo.page.ts"],"names":[],"mappings":"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","file":"roompaymentpayoo-roompaymentpayoo-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { RoompaymentpayooPage } from './roompaymentpayoo.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: RoompaymentpayooPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [RoompaymentpayooPage]\n})\nexport class RoompaymentpayooPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar style=\\\"min-height: 0px;text-align: center\\\">\\n    <ion-row>\\n      <ion-col style=\\\"text-align: center;height: 48px;\\\">\\n        <div style=\\\"align-self: center\\\">\\n          <div style=\\\"position: absolute;height: 48px;width: 48px;top: 8px;\\\" (click)=\\\"goback()\\\">\\n            <!-- <ion-icon color=\\\"dark-tint\\\" (click)=\\\"goback()\\\" style=\\\"font-size: 2em;\\\" name=\\\"arrow-back\\\" class=\\\"card-title\\\"></ion-icon> -->\\n            <img style=\\\"height: 48px; padding: 8px;margin-top: -9px;margin-left:-14px\\\"\\n              src=\\\"./assets/imgs/ios-arrow-round-back.svg\\\">\\n          </div>\\n\\n          <div style=\\\"padding-top: 6px;font-size: 20px;font-weight: bold;\\\"><label class=\\\"text-title\\\">Thanh toán</label>\\n          </div>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding>\\n  <img src=\\\"./assets/step/step_3.svg\\\">\\n  <div *ngIf=\\\"stt=='0'\\\">\\n    <div>\\n      <ion-label class=\\\"text\\\" text-wrap>\\n        Mã thanh toán Payoo: {{BillingCode}}, số tiền: <span class=\\\"totalPrice\\\">{{priceshow}} VND</span>  vui lòng thanh toán trước <span class=\\\"textpayment\\\">{{PeriodPaymentDate}}</span>\\n      </ion-label>\\n    </div>\\n    <div>\\n      <label class=\\\"text\\\">Để tìm cửa hàng gần nhất, hãy <a target=\\\"_blank\\\" href=\\\"https://payoo.vn/mapv2/public/index.php?verify=true\\\">xem tại đây</a></label>\\n    </div>\\n    <div class=\\\"mt15\\\">\\n      <img src=\\\"./assets/imgpayoo/payoo_store.jpg\\\">\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"stt=='1'&&qrimg\\\">\\n    <p>\\n      Quý khách vui lòng quét mã QR dưới đây để thanh toán \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n    </p>\\n    <div>\\n      <img style=\\\"width:170px\\\"  src={{qrimg}}>\\n    </div>\\n    <div class=\\\"mt15\\\">\\n      <img src=\\\"./assets/imgpayoo/help_qrcode.jpg\\\">\\n    </div>\\n  </div>\\n </ion-content>\\n <ion-footer>\\n  <div style=\\\"background-color: #ffffff; text-align: center\\\">\\n    <button (click)=\\\"next()\\\" ion-button round outline class=\\\"button button2\\\">Tiếp tục</button>\\n  </div>\\n</ion-footer>\"","module.exports = \"::ng-deep .totalPrice {\\n  color: #26BED6;\\n  font-weight: bold;\\n}\\n\\n.button2 {\\n  background: #ff9500;\\n  color: #ffffff;\\n  border-color: #ff9500;\\n  width: 90%;\\n}\\n\\n.div-btn {\\n  background-color: #ffffff;\\n  text-align: center;\\n  margin-top: 20px;\\n}\\n\\n.mt15 {\\n  margin-top: 15px;\\n}\\n\\n.totalPrice {\\n  font-weight: bold;\\n  color: #26BED6;\\n}\\n\\n.textpayment {\\n  color: #003C71;\\n  font-weight: bold;\\n}\\n\\n.text {\\n  font-size: 14px;\\n  letter-spacing: -0.4px;\\n  line-height: 2;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kZXYtaXZpdnUvRG9jdW1lbnRzL0RldmVsb3Avb2xpdmlhX2lvcy9zcmMvYXBwL3Jvb21wYXltZW50cGF5b28vcm9vbXBheW1lbnRwYXlvby5wYWdlLnNjc3MiLCJzcmMvYXBwL3Jvb21wYXltZW50cGF5b28vcm9vbXBheW1lbnRwYXlvby5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0k7RUFFQSxjQUFBO0VBQ0EsaUJBQUE7QUNESjs7QURJQTtFQUVJLG1CQUFBO0VBQ0EsY0FBQTtFQUNBLHFCQUFBO0VBQ0EsVUFBQTtBQ0ZKOztBREtBO0VBRUkseUJBQUE7RUFBMkIsa0JBQUE7RUFBbUIsZ0JBQUE7QUNEbEQ7O0FER0E7RUFFSSxnQkFBQTtBQ0RKOztBREdBO0VBQ0ksaUJBQUE7RUFDQSxjQUFBO0FDQUo7O0FERUE7RUFDSSxjQUFBO0VBQ0EsaUJBQUE7QUNDSjs7QURDQTtFQUNJLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGNBQUE7QUNFSiIsImZpbGUiOiJzcmMvYXBwL3Jvb21wYXltZW50cGF5b28vcm9vbXBheW1lbnRwYXlvby5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyI6Om5nLWRlZXAge1xuICAgIC50b3RhbFByaWNlXG57XG4gICAgY29sb3I6ICMyNkJFRDY7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG59XG4uYnV0dG9uMlxue1xuICAgIGJhY2tncm91bmQ6ICNmZjk1MDA7XG4gICAgY29sb3I6ICNmZmZmZmY7XG4gICAgYm9yZGVyLWNvbG9yOiAjZmY5NTAwO1xuICAgIHdpZHRoOiA5MCU7XG59XG5cbi5kaXYtYnRuXG57XG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgdGV4dC1hbGlnbjogY2VudGVyO21hcmdpbi10b3A6IDIwcHhcbn1cbi5tdDE1XG57XG4gICAgbWFyZ2luLXRvcDogMTVweDtcbn1cbi50b3RhbFByaWNlIHtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICBjb2xvcjogIzI2QkVENjtcbn1cbi50ZXh0cGF5bWVudHtcbiAgICBjb2xvcjojMDAzQzcxOyBcbiAgICBmb250LXdlaWdodDpib2xkXG59XG4udGV4dHtcbiAgICBmb250LXNpemU6IDE0cHg7XG4gICAgbGV0dGVyLXNwYWNpbmc6IC0wLjRweDtcbiAgICBsaW5lLWhlaWdodDogMjtcbn1cbiIsIjo6bmctZGVlcCAudG90YWxQcmljZSB7XG4gIGNvbG9yOiAjMjZCRUQ2O1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLmJ1dHRvbjIge1xuICBiYWNrZ3JvdW5kOiAjZmY5NTAwO1xuICBjb2xvcjogI2ZmZmZmZjtcbiAgYm9yZGVyLWNvbG9yOiAjZmY5NTAwO1xuICB3aWR0aDogOTAlO1xufVxuXG4uZGl2LWJ0biB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgbWFyZ2luLXRvcDogMjBweDtcbn1cblxuLm10MTUge1xuICBtYXJnaW4tdG9wOiAxNXB4O1xufVxuXG4udG90YWxQcmljZSB7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xuICBjb2xvcjogIzI2QkVENjtcbn1cblxuLnRleHRwYXltZW50IHtcbiAgY29sb3I6ICMwMDNDNzE7XG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xufVxuXG4udGV4dCB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgbGV0dGVyLXNwYWNpbmc6IC0wLjRweDtcbiAgbGluZS1oZWlnaHQ6IDI7XG59Il19 */\"","import { RoomInfo } from '../providers/book-service';\nimport { GlobalFunction } from './../providers/globalfunction';\nimport { NavController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport * as request from 'requestretry';\nimport { C } from '../providers/constants';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-roompaymentpayoo',\n  templateUrl: './roompaymentpayoo.page.html',\n  styleUrls: ['./roompaymentpayoo.page.scss'],\n})\nexport class RoompaymentpayooPage implements OnInit {\n  bookingCode;stt;text;qrimg;BillingCode;PeriodPaymentDate\n  intervalID: NodeJS.Timeout;priceshow;PriceAvgPlusTAStr;roomtype;sttbooking;payment\n  constructor(private navCtrl:NavController, public gf: GlobalFunction,\n    private activatedRoute: ActivatedRoute,private Roomif:RoomInfo) { }\n\n  ngOnInit() {\n    this.bookingCode = this.activatedRoute.snapshot.paramMap.get('code');\n    this.stt= this.activatedRoute.snapshot.paramMap.get('stt');\n    this.sttbooking= this.activatedRoute.snapshot.paramMap.get('sttbooking');\n    this.roomtype = this.Roomif.roomtype;\n    this.PriceAvgPlusTAStr = this.roomtype.PriceAvgPlusTAStr;\n    if (this.Roomif.priceshow) {\n      this.priceshow = this.Roomif.priceshow;\n    }\n    else {\n      this.priceshow = this.PriceAvgPlusTAStr;\n    }\n    if (this.stt=='0') {\n      this.BillingCode=this.Roomif.BillingCode;\n    }\n    else\n    {\n      this.qrimg=this.Roomif.qrimg;\n      this.intervalID = setInterval(() => {\n        this.checkBooking(0);\n      }, 1000 * 1);\n      setTimeout(() => {\n        clearInterval(this.intervalID);\n      }, 60000 * 15);\n    }\n    this.PeriodPaymentDate=moment(this.Roomif.PeriodPaymentDate).format('HH:mm DD/MM/YYYY');\n  }\n  goback()\n  {\n    if (this.stt=='1') {\n      clearInterval(this.intervalID);\n    }\n    this.navCtrl.back();\n  }\n  next()\n  {\n    var se=this;\n    clearInterval(this.intervalID);\n    if (this.stt=='0') {\n      se.Roomif.priceshowtt = se.priceshow;\n      if (this.Roomif.payment) {\n        this.payment=\"AL\";\n      }\n      else{\n        this.payment=\"RQ\";\n      }\n      se.navCtrl.navigateForward('/roompaymentdone/'+se.bookingCode+'/'+this.payment);\n    }\n    else\n    {\n      se.checkBooking(1);\n    }\n\n  }\n  checkBooking(value) {\n    var se = this;\n    var options = {\n      method: 'GET',\n      url: C.urls.baseUrl.urlPost + '/mCheckBooking',\n      qs: { code: se.bookingCode },\n      headers:\n      {\n      }\n    };\n    request(options, function (error, response, body) {\n      if (response.statusCode != 200) {\n        var objError = {\n          page: \"roompaymentselect\",\n          func: \"openWebpage\",\n          message: response.statusMessage,\n          content: response.body,\n          type: \"warning\",\n          para: JSON.stringify(options)\n        };\n        C.writeErrorLog(objError, response);\n      }\n      if (error) {\n        error.page = \"roompaymentselect\";\n        error.func = \"openWebpage\";\n        error.param = JSON.stringify(options);\n        C.writeErrorLog(error, response);\n      };\n      if (body) {\n        var rs = JSON.parse(body);\n        if (rs.StatusBooking == 3) {\n          var id = rs.BookingCode;\n          var total = se.priceshow;\n          se.Roomif.priceshowtt = se.priceshow;\n          clearInterval(se.intervalID);\n          se.navCtrl.navigateForward('/roompaymentdoneean/' + id + '/' + total + '/0');\n        }\n      }\n      else {\n        error.page = \"roompaymentselect\";\n        error.func = \"openWebpage\";\n        error.param = JSON.stringify(options);\n        C.writeErrorLog(error, response);\n        alert(\"Đã có sự cố xảy ra, vui lòng thử lại!\");\n      }\n    });\n  }\n}\n"],"sourceRoot":""}