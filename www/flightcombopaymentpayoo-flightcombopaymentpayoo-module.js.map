{"version":3,"sources":["webpack:///./src/app/flightcombopaymentpayoo/flightcombopaymentpayoo.module.ts","webpack:///./src/app/flightcombopaymentpayoo/flightcombopaymentpayoo.page.html","webpack:///./src/app/flightcombopaymentpayoo/flightcombopaymentpayoo.page.scss","webpack:///./src/app/flightcombopaymentpayoo/flightcombopaymentpayoo.page.ts"],"names":[],"mappings":"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","file":"flightcombopaymentpayoo-flightcombopaymentpayoo-module.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { FlightcombopaymentpayooPage } from './flightcombopaymentpayoo.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: FlightcombopaymentpayooPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [FlightcombopaymentpayooPage]\n})\nexport class FlightcombopaymentpayooPageModule {}\n","module.exports = \"<ion-header>\\n  <ion-toolbar style=\\\"min-height: 0px;text-align: center\\\">\\n    <ion-row>\\n      <ion-col style=\\\"text-align: center;height: 48px;\\\">\\n        <div style=\\\"align-self: center\\\">\\n          <div style=\\\"position: absolute;height: 48px;width: 48px;top: 8px;\\\" (click)=\\\"goback()\\\">\\n            <!-- <ion-icon color=\\\"dark-tint\\\" (click)=\\\"goback()\\\" style=\\\"font-size: 2em;\\\" name=\\\"arrow-back\\\" class=\\\"card-title\\\"></ion-icon> -->\\n            <img style=\\\"height: 48px; padding: 8px;margin-top: -9px;margin-left:-14px\\\"\\n              src=\\\"./assets/imgs/ios-arrow-round-back.svg\\\">\\n          </div>\\n\\n          <div style=\\\"padding-top: 6px;font-size: 20px;font-weight: bold;\\\"><label class=\\\"text-title\\\">Thanh toán</label>\\n          </div>\\n        </div>\\n      </ion-col>\\n    </ion-row>\\n  </ion-toolbar>\\n</ion-header>\\n<ion-content padding>\\n  <div class=\\\"text-center\\\">\\n    <img class=\\\"img-step\\\" src=\\\"./assets/ic_flight/step_3.svg\\\">\\n  </div>\\n  <div *ngIf=\\\"stt=='0'\\\">\\n    <div>\\n      <ion-label class=\\\"text\\\" text-wrap>\\n        Mã thanh toán Payoo: {{BillingCode}}, số tiền: <span class=\\\"totalPrice\\\">{{priceshow}} VND</span>  vui lòng thanh toán trước <span class=\\\"textpayment\\\">{{PeriodPaymentDate}}</span>\\n      </ion-label>\\n    </div>\\n    <div>\\n      <label class=\\\"text\\\">Để tìm cửa hàng gần nhất, hãy <a target=\\\"_blank\\\" href=\\\"https://payoo.vn/mapv2/public/index.php?verify=true\\\">xem tại đây</a></label>\\n    </div>\\n    <div class=\\\"mt15\\\">\\n      <img src=\\\"./assets/imgpayoo/payoo_store.jpg\\\">\\n    </div>\\n  </div>\\n  <div *ngIf=\\\"stt=='1'&&qrimg\\\">\\n    <p>\\n      Quý khách vui lòng quét mã QR dưới đây để thanh toán \\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\t\\n    </p>\\n    <div>\\n      <img style=\\\"width:170px\\\"  src={{qrimg}}>\\n    </div>\\n    <div class=\\\"mt15\\\">\\n      <img src=\\\"./assets/imgpayoo/help_qrcode.jpg\\\">\\n    </div>\\n  </div>\\n </ion-content>\\n <ion-footer>\\n  <div style=\\\"background-color: #ffffff; text-align: center\\\">\\n    <button (click)=\\\"next()\\\" ion-button round outline class=\\\"button button2\\\">Tiếp tục</button>\\n  </div>\\n</ion-footer>\"","module.exports = \"::ng-deep .totalPrice {\\n  color: #26BED6;\\n  font-weight: bold;\\n}\\n\\n.button2 {\\n  background: #ff9500;\\n  color: #ffffff;\\n  border-color: #ff9500;\\n  width: 90%;\\n}\\n\\n.div-btn {\\n  background-color: #ffffff;\\n  text-align: center;\\n  margin-top: 20px;\\n}\\n\\n.mt15 {\\n  margin-top: 15px;\\n}\\n\\n.totalPrice {\\n  font-weight: bold;\\n  color: #26BED6;\\n}\\n\\n.textpayment {\\n  color: #003C71;\\n  font-weight: bold;\\n}\\n\\n.text {\\n  font-size: 14px;\\n  letter-spacing: -0.4px;\\n  line-height: 2;\\n}\\n\\n.text-center {\\n  text-align: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9pdGRldi9Eb2N1bWVudHMvRGV2ZWxvcC9PbGl2aWFfaU9TL29saXZpYV9pb3MgaG90Zml4IDIuOS43IHRvdXIvc3JjL2FwcC9mbGlnaHRjb21ib3BheW1lbnRwYXlvby9mbGlnaHRjb21ib3BheW1lbnRwYXlvby5wYWdlLnNjc3MiLCJzcmMvYXBwL2ZsaWdodGNvbWJvcGF5bWVudHBheW9vL2ZsaWdodGNvbWJvcGF5bWVudHBheW9vLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUVBLGNBQUE7RUFDQSxpQkFBQTtBQ0RKOztBRElBO0VBRUksbUJBQUE7RUFDQSxjQUFBO0VBQ0EscUJBQUE7RUFDQSxVQUFBO0FDRko7O0FES0E7RUFFSSx5QkFBQTtFQUEyQixrQkFBQTtFQUFtQixnQkFBQTtBQ0RsRDs7QURHQTtFQUVJLGdCQUFBO0FDREo7O0FER0E7RUFDSSxpQkFBQTtFQUNBLGNBQUE7QUNBSjs7QURFQTtFQUNJLGNBQUE7RUFDQSxpQkFBQTtBQ0NKOztBRENBO0VBQ0ksZUFBQTtFQUNBLHNCQUFBO0VBQ0EsY0FBQTtBQ0VKOztBREFBO0VBRUEsa0JBQUE7QUNFQSIsImZpbGUiOiJzcmMvYXBwL2ZsaWdodGNvbWJvcGF5bWVudHBheW9vL2ZsaWdodGNvbWJvcGF5bWVudHBheW9vLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIjo6bmctZGVlcCB7XG4gICAgLnRvdGFsUHJpY2VcbntcbiAgICBjb2xvcjogIzI2QkVENjtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cbn1cbi5idXR0b24yXG57XG4gICAgYmFja2dyb3VuZDogI2ZmOTUwMDtcbiAgICBjb2xvcjogI2ZmZmZmZjtcbiAgICBib3JkZXItY29sb3I6ICNmZjk1MDA7XG4gICAgd2lkdGg6IDkwJTtcbn1cblxuLmRpdi1idG5cbntcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOyB0ZXh0LWFsaWduOiBjZW50ZXI7bWFyZ2luLXRvcDogMjBweFxufVxuLm10MTVcbntcbiAgICBtYXJnaW4tdG9wOiAxNXB4O1xufVxuLnRvdGFsUHJpY2Uge1xuICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgIGNvbG9yOiAjMjZCRUQ2O1xufVxuLnRleHRwYXltZW50e1xuICAgIGNvbG9yOiMwMDNDNzE7IFxuICAgIGZvbnQtd2VpZ2h0OmJvbGRcbn1cbi50ZXh0e1xuICAgIGZvbnQtc2l6ZTogMTRweDtcbiAgICBsZXR0ZXItc3BhY2luZzogLTAuNHB4O1xuICAgIGxpbmUtaGVpZ2h0OiAyO1xufVxuLnRleHQtY2VudGVyXG57XG50ZXh0LWFsaWduOiBjZW50ZXI7XG59XG4iLCI6Om5nLWRlZXAgLnRvdGFsUHJpY2Uge1xuICBjb2xvcjogIzI2QkVENjtcbiAgZm9udC13ZWlnaHQ6IGJvbGQ7XG59XG5cbi5idXR0b24yIHtcbiAgYmFja2dyb3VuZDogI2ZmOTUwMDtcbiAgY29sb3I6ICNmZmZmZmY7XG4gIGJvcmRlci1jb2xvcjogI2ZmOTUwMDtcbiAgd2lkdGg6IDkwJTtcbn1cblxuLmRpdi1idG4ge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIG1hcmdpbi10b3A6IDIwcHg7XG59XG5cbi5tdDE1IHtcbiAgbWFyZ2luLXRvcDogMTVweDtcbn1cblxuLnRvdGFsUHJpY2Uge1xuICBmb250LXdlaWdodDogYm9sZDtcbiAgY29sb3I6ICMyNkJFRDY7XG59XG5cbi50ZXh0cGF5bWVudCB7XG4gIGNvbG9yOiAjMDAzQzcxO1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnRleHQge1xuICBmb250LXNpemU6IDE0cHg7XG4gIGxldHRlci1zcGFjaW5nOiAtMC40cHg7XG4gIGxpbmUtaGVpZ2h0OiAyO1xufVxuXG4udGV4dC1jZW50ZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG59Il19 */\"","import { Bookcombo } from './../providers/book-service';\nimport { RoomInfo } from '../providers/book-service';\nimport { GlobalFunction } from './../providers/globalfunction';\nimport { NavController } from '@ionic/angular';\nimport { ActivatedRoute } from '@angular/router';\nimport { Component, OnInit } from '@angular/core';\nimport * as request from 'requestretry';\nimport { C } from '../providers/constants';\nimport * as moment from 'moment';\n@Component({\n  selector: 'app-flightcombopaymentpayoo',\n  templateUrl: './flightcombopaymentpayoo.page.html',\n  styleUrls: ['./flightcombopaymentpayoo.page.scss'],\n})\nexport class FlightcombopaymentpayooPage implements OnInit {\n\n  bookingCode;stt;text;qrimg;BillingCode;PeriodPaymentDate\n  intervalID: NodeJS.Timeout;priceshow;PriceAvgPlusTAStr;roomtype;sttbooking\n  constructor(private navCtrl:NavController, public gf: GlobalFunction,\n    private activatedRoute: ActivatedRoute,private Roomif:RoomInfo,private bookCombo: Bookcombo) { }\n\n  ngOnInit() {\n    this.bookingCode = this.activatedRoute.snapshot.paramMap.get('code');\n    this.stt= this.activatedRoute.snapshot.paramMap.get('stt');\n    this.sttbooking= this.activatedRoute.snapshot.paramMap.get('sttbooking');\n    this.priceshow = this.bookCombo.totalprice.toLocaleString().replace(/(\\d)(?=(\\d\\d\\d)+(?!\\d))/g, \"$1.\");\n    if (this.stt=='0') {\n      this.BillingCode=this.Roomif.BillingCode;\n    }\n    else\n    {\n      this.qrimg=this.Roomif.qrimg;\n      this.intervalID = setInterval(() => {\n        this.checkBooking();\n      }, 1000 * 1); \n      setTimeout(() => {\n        clearInterval(this.intervalID);\n      }, 60000 * 15);\n    }\n    this.PeriodPaymentDate=moment(this.Roomif.PeriodPaymentDate).format('HH:mm DD/MM/YYYY');\n  }\n  goback()\n  {\n    if (this.stt=='1') {\n      clearInterval(this.intervalID);\n    }\n    this.navCtrl.back();\n  }\n  next()\n  {\n    var se=this;\n    clearInterval(this.intervalID);\n    if (this.stt=='0') {\n      se.Roomif.priceshowtt = se.priceshow;\n      if(se.Roomif.payment=='AL' &&  se.bookCombo.DepartATCode  && se.bookCombo.ReturnATCode){\n        se.navCtrl.navigateForward('/flightcombopaymentdone/AL');\n      }\n      else{\n        se.navCtrl.navigateForward('/flightcombopaymentdone/RQ');\n      }\n    }\n    else\n    {\n      se.checkBooking();\n    }\n  }\n  checkBooking() {\n    var se = this;\n    var options = {\n      method: 'GET',\n      url: C.urls.baseUrl.urlPost + '/mCheckBooking',\n      qs: { code: se.bookingCode },\n      headers:\n      {\n      }\n    };\n    request(options, function (error, response, body) {\n      if (response.statusCode != 200) {\n        var objError = {\n          page: \"roompaymentselect\",\n          func: \"openWebpage\",\n          message: response.statusMessage,\n          content: response.body,\n          type: \"warning\",\n          para: JSON.stringify(options)\n        };\n        C.writeErrorLog(objError, response);\n      }\n      if (error) {\n        error.page = \"roompaymentselect\";\n        error.func = \"openWebpage\";\n        error.param = JSON.stringify(options);\n        C.writeErrorLog(error, response);\n      };\n      if (body) {\n        var rs = JSON.parse(body);\n        if (rs.StatusBooking == 3) {\n          var id = rs.BookingCode;\n          var total = se.priceshow;\n          se.Roomif.priceshowtt = se.priceshow;\n          clearInterval(se.intervalID);\n          if(se.Roomif.payment=='AL' && se.bookCombo.DepartATCode &&  se.bookCombo.ReturnATCode){\n            se.navCtrl.navigateForward('/flightcombodoneprepay/' + id + '/' + total + '/0')\n            // let url = C.urls.baseUrl.urlFlight + \"/gate/apiv1/SummaryBooking/\" + se.bookCombo.FlightCode;\n            // se.callCheckHoldTicket(url).then((check) => {\n            //   if (check) {\n            //     se.navCtrl.navigateForward('/flightcombodoneprepay/' + id + '/' + total + '/0')\n            //   }\n            //   else {\n            //     se.navCtrl.navigateForward('/flightcombowarning')\n            //   }\n            // })\n            //se.navCtrl.navigateForward('/flightcombopaymentdone/AL');\n          }\n          else{\n            se.navCtrl.navigateForward('/flightcombopaymentdone/RQ');\n          }\n        }\n        // else{\n        //   if (value==1) {\n        //     se.navCtrl.navigateForward('/flightcombopaymentdone/RQ');\n        //   }\n        // }\n      }\n      else {\n        error.page = \"roompaymentselect\";\n        error.func = \"openWebpage\";\n        error.param = JSON.stringify(options);\n        C.writeErrorLog(error, response);\n        alert(\"Đã có sự cố xảy ra, vui lòng thử lại!\");\n      }\n    });\n  }\n  callCheckHoldTicket(url) {\n    var res = false;\n    return new Promise((resolve, reject) => {\n      var options = {\n        method: 'GET',\n        url: url,\n        timeout: 180000, maxAttempts: 5, retryDelay: 20000,\n        headers: {\n          \"Authorization\": \"Basic YXBwOmNTQmRuWlV6RFFiY1BySXNZdz09\",\n          'Content-Type': 'application/json; charset=utf-8',\n        },\n      };\n      request(options, function (error, response, body) {\n        if (error) {\n          error.page = \"globalfunction\";\n          error.func = \"updatePaymentMethod\";\n          error.param = JSON.stringify(options);\n        }\n        if (response.statusCode == 200) {\n          let result = JSON.parse(body);\n          if (result.isRoundTrip) {//khứ hồi\n            //Có mã giữ chỗ và trạng thái đã xuất vé cả 2 chiều thì trả về true - hoàn thành\n            if (result.departFlight.atBookingCode != null && result.departFlight.atBookingCode.indexOf(\"T__\") == -1 && result.returnFlight.atBookingCode != null && result.returnFlight.atBookingCode.indexOf(\"T__\") == -1\n              && result.departFlight.status == 4 && result.returnFlight.status == 4) {\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          } else {//Có mã giữ chỗ và trạng thái đã xuất vé thì trả về true - hoàn thành\n            if (result.departFlight.atBookingCode != null && result.departFlight.atBookingCode.indexOf(\"T__\") == -1 && result.departFlight.status == 4) {\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          }\n        }\n      })\n    })\n  }\n\n}\n"],"sourceRoot":""}